# VoxFlow

VoxFlow是一个基于Next.js构建的语音转录工具，使用了SiliconFlow API进行语音识别。该应用允许用户通过录制或上传音频文件，将语音内容转换为文字，并支持高级的音频切片转录功能。

![6829d9d29ff9a.png](https://img-cdn.ccrui.cn/2025/05/18/6829d9d29ff9a.png)

## 功能特点

- **语音录制**：直接使用麦克风录制音频进行转写
- **音频上传**：上传已有的音频文件进行转写
- **🆕 高级转录功能**：
  - **智能音频切片**：基于静音检测自动分割长音频文件
  - **时间戳同步**：为每个音频片段生成精确的时间标记
  - **字幕文件导出**：支持SRT和VTT格式字幕文件下载
  - **并发处理**：多个音频片段同时转录，大幅提高处理效率
  - **可调参数**：支持自定义切片长度、静音阈值等参数
- **双重认证方式**：
  - 使用服务器API密钥（通过密码验证）
  - 使用个人API密钥（本地存储）
- **现代UI界面**：基于TailwindCSS和Radix UI构建的友好用户界面
- **中文支持**：完全支持中文语音识别和界面

## 技术栈

- **前端框架**：Next.js 15
- **UI组件**：Radix UI组件库
- **样式**：TailwindCSS
- **语音API**：SiliconFlow API
- **音频处理**：Web Audio API、audiobuffer-to-wav
- **服务端功能**：Next.js Server Actions

## 安装步骤

1. 克隆仓库：

   ```bash
   git clone https://github.com/cr-zhichen/vox-flow.git
   cd vox-flow
   ```

2. 安装依赖：

   ```bash
   pnpm install
   ```

3. 配置环境变量：

   在项目根目录创建`.env.local`文件，添加以下内容：

   ``` env
   # 可选：配置服务器端API密钥
   SILICONFLOW_API_KEY=your_api_key_here

   # 可选：如果使用密码保护API密钥，设置密码
   AUTH_PASSWORD=your_password_here
   ```

4. 运行开发服务器：

   ```bash
   pnpm run dev
   ```

5. 打开浏览器访问 `http://localhost:3000`

## 使用说明

### 认证方式

应用支持两种使用方式：

1. **服务器API密钥（推荐）**：
   - 管理员配置服务器环境变量`SILICONFLOW_API_KEY`
   - 用户通过密码验证后，使用服务器API密钥
   - 密码验证通过后，所有API请求使用服务器端密钥

2. **本地API密钥**：
   - 用户输入自己的SiliconFlow API密钥
   - 密钥安全存储在浏览器本地存储中
   - 所有API请求使用用户提供的密钥

### 语音转写

1. **录制音频**：
   - 点击"录制音频"标签
   - 点击"开始录制"按钮进行录音
   - 点击"停止录制"结束录音
   - 点击"转录音频"将录音发送到API进行转写

2. **上传音频**：
   - 点击"上传音频"标签
   - 点击"选择音频文件"按钮选择音频文件
   - 选择文件后点击"转录音频"按钮进行转写

3. **🆕 高级转录（推荐）**：
   - 点击"高级转录"标签
   - **文件上传**：选择音频文件（支持较大文件）
   - **参数设置**：
     - 最小片段长度：设置最短音频片段的时长（默认0秒，不过滤短语音）
     - 最大片段长度：设置最长音频片段的时长（默认30秒）
     - 静音阈值：调整静音检测的敏感度（0.001-0.1）
   - **音频切片**：点击"分割音频片段"自动进行智能切片
   - **批量转录**：点击"开始转录所有片段"进行并发转录
   - **结果导出**：
     - 查看带时间戳的转录结果
     - 下载SRT格式字幕文件
     - 下载VTT格式字幕文件

### 转写结果

#### 基础转录
转写完成后，结果将显示在页面上，用户可以：
- 阅读转写文本
- 复制转写内容到剪贴板

#### 高级转录
高级转录提供更丰富的功能：
- **时间戳显示**：每个片段都显示精确的开始和结束时间
- **分段浏览**：按时间顺序查看所有转录片段
- **字幕文件下载**：
  - **SRT格式**：适用于大多数视频播放器和编辑软件
  - **VTT格式**：适用于网页播放器和现代媒体应用

### 高级转录的优势

1. **处理长音频**：自动将长音频文件分割成短片段，避免API限制
2. **提高准确性**：较短的音频片段通常能获得更高的转录准确率
3. **并发效率**：多个片段同时处理，大幅缩短总处理时间
4. **时间定位**：精确的时间戳便于后续编辑和同步
5. **字幕制作**：直接生成标准格式的字幕文件，无需后期处理